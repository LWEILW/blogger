<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.blogger.dao.PermissionMapper.PermissionMapperEx">


    <!--  权限台账  -->
    <select id="getPermissionList" resultType="com.blogger.entity.PermissionEntity.Permission">
        select * from  permission
    </select>

    <!--  权限创建  -->
    <insert id="createPermission" parameterType="com.blogger.entity.PermissionEntity.Permission">
        insert into permission (
        permissionId,
        permissionName,
        parentId,
        parentName,
        functionName,
        functionPath,
        levelNo,
        createPerson,
        createDate
        ) values (
        #{permission.permissionId},
        #{permission.permissionName},
        #{permission.parentId},
        #{permission.parentName},
        #{permission.functionName},
        #{permission.functionPath},
        #{permission.levelNo},
        #{permission.createPerson},
         now()
        )
    </insert>

    <!--  权限更新  -->
    <update id="updatePermission" parameterType="com.blogger.entity.PermissionEntity.Permission">
        update permission
        <set>
            <if test="permission.getPermissionName() !=null and permission.getPermissionName() !=''">
                permissionName=#{permission.permissionName},
            </if>
            <if test="permission.getParentId() !=null and permission.getParentId() !=''">
                parentId=#{permission.parentId},
            </if>
            <if test="permission.getParentName() !=null and permission.getParentName() !=''">
                parentName=#{permission.parentName},
            </if>
            <if test="permission.getFunctionName() !=null and permission.getFunctionName() !=''">
                functionName=#{permission.functionName},
            </if>
            <if test="permission.getFunctionPath() !=null and permission.getFunctionPath() !=''">
                functionPath=#{permission.functionPath},
            </if>
            <if test="permission.getLevelNo() !=null and permission.getLevelNo() !=''">
                levelNo=#{permission.levelNo},
            </if>
            <if test="permission.getUpdatePerson() !=null and permission.getUpdatePerson() !=''">
                updatePerson=#{permission.updatePerson},
            </if>
            updateDate= now()
        </set>
        where permissionId=#{permission.permissionId}
    </update>

    <!--  权限删除  -->
    <delete id="deletePermission" parameterType="java.lang.Integer">
        delete  from  permission where permissionId=#{permissionId}
    </delete>

    <!--  权限详情  -->
    <select id="detailsPermission" parameterType="java.lang.Integer"
            resultType="com.blogger.entity.PermissionEntity.Permission">
        select * from permission where permissionId = #{permissionId}
    </select>


</mapper>
